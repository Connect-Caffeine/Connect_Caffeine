<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{include/layout}">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<title>Connect Caffeine</title>
<meta content="" name="description">
<meta content="" name="keywords">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<style>
.sub-sidebar {
	width: 250px;
	background-color: #fff;
	padding: 20px;
	font-size: 15px;
	font-weight: 600;
	color: #012970;
}

.subside_title {
	font-size: 25px;
}

.card-body-header {
	display: flex;
	justify-content: space-between;
}

.basic-info {
	display: flex;
	width: 100%;
}

.basic-info-left {
    flex: 0 0 40%;
    padding: 10px;
    box-sizing: border-box;
    text-align: center;
    position: relative; 
}

#emp_profile_img {
    object-fit: cover;
    width: 200px;
    height: 200px;
    display: inline-block; 
    margin-top: 20px;
}

.basic-info-right {
	flex: 0 0 60%;
	padding: 10px;
	box-sizing: border-box;
}

.tight-line {
	line-height: 1.2;
	margin: 0;
}

table td, table th {
    vertical-align: middle; 
}
</style>
</head>
<body>
	<th:block layout:fragment="content">
		<main id="main" class="main">
			<div class="sub-sidebar" id="sub-sidebar">
				<span class="subside_title">인사 관리</span><br> <br>
				<h5><a th:href="@{/employeeList}" style="color: inherit;">사원 정보</a></h5>
				<h5><a th:href="@{/empGroupList}" style="color: inherit;">팀 정보</a></h5>
			</div>
			<section class="section dashboard" style="width: calc(100% - 250px);">
				<div class="col-xxl-4 col-md-6" style="width: 100%;">
					<div class="card info-card sales-card" style="margin-top: 25px; margin-left: 25px;">
						<div class="card-body">
							<div class="card-body-header">
								<h2 class="card-title"><b>사원 정보</b></h2>
							</div>
							<ul class="nav nav-tabs nav-tabs-bordered">
			                <li class="nav-item">
			                  <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#profile-overview">기본 정보</button>
			                </li>
			                <li class="nav-item">
			                  <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-edit">근태 현황</button>
			                </li>
			              </ul>
			              <div class="tab-content pt-2">
			                <div class="tab-pane fade show active profile-overview" id="profile-overview">
							<div class="basic-info">
								<div class="basic-info-left">
									<img th:src="@{'/uploadImg/'+${dto.emp_img_file_path}}" alt="Profile" id="emp_profile_img" class="rounded-circle"/>
								</div>
								<div class="basic-info-right">
									<table class="table table-bordered">
										<colgroup>
											<col style="width: 40%;">
											<col style="width: 60%;">
										</colgroup>
										<tr>
											<th>이름</th>
											<td th:text="${dto.emp_name}"></td>
										</tr>
										<tr>
											<th>사원 번호</th>
											<td th:text="${dto.emp_account}"></td>
										</tr>
										<tr>
											<th>생년월일</th>
											<td th:text="${formattedRegNo}"></td>
										</tr>
										<tr>
											<th>주소</th>
											<td>
												<p
													th:text="'(우편번호: ' + (${#strings.length(dto.emp_postcode) == 4} ? '0'+ ${dto.emp_postcode} : ${dto.emp_postcode}) + ')'"
													class="tight-line"></p>
												<p th:text="${dto.emp_addr + ' ' + dto.emp_addr_detail}"
													class="tight-line"></p>
											</td>
										</tr>
										<tr>
											<th>부서</th>
											<td th:text="${empDeptName}"></td>
										</tr>
										<tr>
											<th>팀</th>
											<td th:text="${dto.group_name}"></td>
										</tr>
										<tr>
											<th>직급</th>
											<td th:text="${dto.emp_job_name}"></td>
										</tr>
										<tr>
											<th>휴대전화</th>
											<td th:text="${dto.emp_phone}"></td>
										</tr>
										<tr>
											<th>내선번호</th>
											<td th:text="${dto.emp_desk_phone}"></td>
										</tr>
										<tr>
											<th>이메일</th>
											<td th:text="${dto.emp_email}"></td>
										</tr>
										<tr>
											<th>입사일</th>
											<td
												th:text="${dto.emp_hiredate}"></td>
										</tr>
										<tr th:if="${dto.emp_resign.toUpperCase() == 'Y'}">
											<th>퇴사일</th>
											<td
												th:text="${dto.emp_resigndate}"></td>
										</tr>
										<tbody>
											
										</tbody>
									</table>
								</div>
							</div>
							<div class="d-flex align-items-center" style="display: flex; justify-content: flex-end;">
								<a th:href="@{/employeeUpdate/{emp_code}(emp_code=${dto.emp_code})}">
									<button type="button" class="btn btn-primary rounded-pill">정보 수정</button>
								</a>
								<a th:href="@{/employeeDelete/{emp_code}(emp_code=${dto.emp_code})}">
									<button type="button" class="btn btn-secondary rounded-pill" style="margin-left: 10px;">퇴사 처리</button>
								</a>
							</div>
						</div>
					</div>
					<div class="tab-pane fade profile-edit pt-3" id="profile-edit">
					<table class="table datatable">
						<colgroup>
						</colgroup>
						<thead>
							<tr>
								<th>연도</th>
								<th>월</th>
								<th>일</th>
								<th>출근 시간</th>
								<th>퇴근 시간</th>
								<th>근무 시간</th>
								<th>근무 상태</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="dto:${attnDtoList}">
								<td th:text="${#temporals.format(dto.attn_start, 'yyyy')}"></td>
								<td th:text="${#temporals.format(dto.attn_start, 'MM')}"></td>
								<td th:text="${#temporals.format(dto.attn_start, 'dd')}"></td>
								<td th:text="${#temporals.format(dto.attn_start, 'HH:mm')}"></td>
								<td th:text="${#temporals.format(dto.attn_end, 'HH:mm')}"></td>
								<td th:text="${dto.calc_worktime}"></td>
								<td th:text="${dto.attn_status}"></td>
							</tr>
						</tbody>
					</table>
					</div>
				</div>
				</div>
				</div>
			</section>
		</main>
	<script>

	</script>
	</th:block>
	<!-- ======= Footer ======= -->
	<footer id="footer" class="footer">
    <div class="copyright">
      &copy; Copyright <strong><span>NiceAdmin</span></strong>. All Rights Reserved
    </div>
	<div class="credits">
      All the links in the footer should remain intact.
      You can delete the links only if you purchased the pro version.
      Licensing information: https://bootstrapmade.com/license/
      Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
      Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
    </div>
	</footer>
	<!-- End Footer -->
	<a href="#"
		class="back-to-top d-flex align-items-center justify-content-center"><i
		class="bi bi-arrow-up-short"></i></a>
	<!-- Vendor JS Files -->
	<script src="/bootstrap/vendor/apexcharts/apexcharts.min.js"></script>
	<script src="/bootstrap/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
	<script src="/bootstrap/vendor/chart.js/chart.umd.js"></script>
	<script src="/bootstrap/vendor/echarts/echarts.min.js"></script>
	<script src="/bootstrap/vendor/quill/quill.js"></script>
	<script src="/bootstrap/vendor/simple-datatables/simple-datatables.js"></script>
	<script src="/bootstrap/vendor/tinymce/tinymce.min.js"></script>
	<script src="/bootstrap/vendor/php-email-form/validate.js"></script>
	<!-- Template Main JS File -->
	<script src="/bootstrap/js/main.js"></script>
</body>
</html>